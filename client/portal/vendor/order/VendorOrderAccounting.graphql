fragment VendorOrderAccountingLine on OrderLine {
  id
  amount
  expense
  editable
  jobId
  fieldId
  actionId
  eventId
  providerId
  assignable
  removable
  description
}

fragment VendorOrderAccountingJob on Job {
  id
  ...JobBadge
  expense
  revenue
  start
  removable
  cancelable
  completable
  end
  parentId
  locked
  status
  name
  root {
    id
  }
  onsite
  deliverableCount
  alert
  statusLabel
  statusDescription
  nextStatus(type: INTERNAL)
  nextStatusLabel(type: INTERNAL)
  assignee {
    id
    company
  }
  user {
    id
    name
    dateOfBirth
  }
  properties(valuable: true) {
    id
    display
    property {
      id
      name
    }
  }
  performable {
    id
    internalName
    shortName
  }
}

fragment VendorOrderAccountingPayments on Order {
  ...VendorOrderStatus
  id
  payments {
    id
    authorized
    created
    notes
    captured
    capturedDate
    source {
      id
      name
    }
  }
}

fragment VendorOrderAccountingComponent on Order {
  jobs {
    ...VendorOrderAccountingJob
  }
  orderLines {
    ...VendorOrderAccountingLine
  }
  ...VendorOrderAccountingPayments
  revenue
  invoice {
    id
    url
  }
  expense
}

query VendorOrderAccounting($orderId: ID!) {
  order(orderId: $orderId) {
    id
    invoiceable
    chargable
    ...VendorOrderAccountingComponent
    invoice {
      ...VendorInvoiceEdit
    }
  }
}

query VendorJobAccounting($orderId: ID!) {
  order(orderId: $orderId) {
    id
    orderLines {
      ...VendorOrderAccountingLine
    }
  }
}

mutation VendorOrderAccountingAddPayment($orderId: ID!, $data: ManualInvoicePayment!) {
  createManualPayment(orderId: $orderId, data: $data) {
    id
    ...VendorOrderAccountingPayments
  }
}
